FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogZmgtc3luYy1zZXJ2ZXItYXBiCmltYWdlOiBmZWVkaGVucnkvZmgtc3luYy1zZXJ2ZXIt\
YXBiCmRlc2NyaXB0aW9uOiBUaGUgRmVlZEhlbnJ5IFN5bmMgU2VydmVyIEFQQgpiaW5kYWJsZTog\
RmFsc2UKYXN5bmM6IG9wdGlvbmFsCnRhZ3M6CiAgLSBtb2JpbGUtc2VydmljZQptZXRhZGF0YToK\
ICBkaXNwbGF5TmFtZTogRmVlZEhlbnJ5IFN5bmMgU2VydmVyCiAgY29uc29sZS5vcGVuc2hpZnQu\
aW8vaWNvbkNsYXNzOiBmb250LWljb24gaWNvbi1ub2RlanMKICBzZXJ2aWNlTmFtZTogZmhzeW5j\
CnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IERlcGxveSBGSCBTeW5j\
LVNlcnZlcgogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6IHt9CiAgICBwYXJhbWV0ZXJzOgog\
ICAgLSBuYW1lOiBNT05HT0RCX0FETUlOX1BBU1NXT1JECiAgICAgZGVzY3JpcHRpb246IFBhc3N3\
b3JkIGZvciB0aGUgTW9uZ29EQiBhZG1pbiB1c2VyLiBUaGlzIHZhbHVlIHdpbGwgYmUgZ2VuZXJh\
dGVkIGlmIG5vdCBzcGVjaWZpZWQuCiAgICAgIHBhdHRlcm46ICJbYS16QS1aMC05XXs0MH0iCiAg\
ICAtIG5hbWU6IE1PTkdPREJfVVNFUl9OQU1FCiAgICAgIGRlc2NyaXB0aW9uOiBVc2VybmFtZSBm\
b3IgdGhlIGNyZWF0ZWQgTW9uZ29EQiB1c2VyLgogICAgICB2YWx1ZTogInN5bmMtdXNlciIKICAg\
IC0gbmFtZTogTU9OR09EQl9VU0VSX1BBU1NXT1JECiAgICAgIGRlc2NyaXB0aW9uOiBQYXNzd29y\
ZCBmb3IgdGhlIGNyZWF0ZWQgTW9uZ29EQiB1c2VyLiBUaGlzIHZhbHVlIHdpbGwgYmUgZ2VuZXJh\
dGVkIGlmIG5vdCBzcGVjaWZpZWQuCiAgICAgIHBhdHRlcm46ICJbYS16QS1aMC05XXs0MH0iCg=="




COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
