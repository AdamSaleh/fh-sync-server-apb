FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGZoLXN5bmMtc2VydmVyLWFwYgpkZXNjcmlwdGlvbjogVGhlIEZl\
ZWRIZW5yeSBTeW5jIFNlcnZlciBBUEIKYmluZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRpb25hbAp0\
YWdzOgogIC0gbW9iaWxlLXNlcnZpY2UKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IEZlZWRIZW5y\
eSBTeW5jIFNlcnZlcgogIGNvbnNvbGUub3BlbnNoaWZ0LmlvL2ljb25DbGFzczogZm9udC1pY29u\
IGljb24tbm9kZWpzCiAgc2VydmljZU5hbWU6IGZoLXN5bmMtc2VydmVyCiAgaW50ZWdyYXRpb25z\
OiBrZXljbG9hayxhcGlLZXlzCnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRp\
b246IERlcGxveSBGSCBTeW5jLVNlcnZlcgogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6IHt9\
CiAgICBwYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBNT05HT0RCX0FETUlOX1BBU1NXT1JECiAgICAg\
IGRlc2NyaXB0aW9uOiBQYXNzd29yZCBmb3IgdGhlIE1vbmdvREIgYWRtaW4gdXNlci4gVGhpcyB2\
YWx1ZSB3aWxsIGJlIGdlbmVyYXRlZCBpZiBub3Qgc3BlY2lmaWVkLgogICAgICBwYXR0ZXJuOiAi\
W2EtekEtWjAtOV17NDB9IgogICAgICB0eXBlOiBzdHJpbmcKICAgIC0gbmFtZTogTU9OR09EQl9V\
U0VSX05BTUUKICAgICAgZGVzY3JpcHRpb246IFVzZXJuYW1lIGZvciB0aGUgY3JlYXRlZCBNb25n\
b0RCIHVzZXIuCiAgICAgIGRlZmF1bHQ6ICJzeW5jLXVzZXIiCiAgICAgIHR5cGU6IHN0cmluZwog\
ICAgLSBuYW1lOiBNT05HT0RCX1VTRVJfUEFTU1dPUkQKICAgICAgZGVzY3JpcHRpb246IFBhc3N3\
b3JkIGZvciB0aGUgY3JlYXRlZCBNb25nb0RCIHVzZXIuIFRoaXMgdmFsdWUgd2lsbCBiZSBnZW5l\
cmF0ZWQgaWYgbm90IHNwZWNpZmllZC4KICAgICAgcGF0dGVybjogIlthLXpBLVowLTldezQwfSIK\
ICAgICAgdHlwZTogc3RyaW5nCg=="


COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
